"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var protocol_http_1 = require("@aws-sdk/protocol-http");
function addExpectContinueMiddleware(options) {
    var _this = this;
    return function (next) { return function (args) { return tslib_1.__awaiter(_this, void 0, void 0, function () {
        var request;
        return tslib_1.__generator(this, function (_a) {
            request = args.request;
            if (protocol_http_1.HttpRequest.isInstance(request) &&
                request.body &&
                options.runtime === "node") {
                request.headers = tslib_1.__assign(tslib_1.__assign({}, request.headers), { Expect: "100-continue" });
            }
            return [2 /*return*/, next(tslib_1.__assign(tslib_1.__assign({}, args), { request: request }))];
        });
    }); }; };
}
exports.addExpectContinueMiddleware = addExpectContinueMiddleware;
exports.addExpectContinueMiddlewareOptions = {
    step: "build",
    tags: ["SET_EXPECT_HEADER", "EXPECT_HEADER"],
    name: "addExpectContinueMiddleware"
};
exports.getAddExpectContinuePlugin = function (options) { return ({
    applyToStack: function (clientStack) {
        clientStack.add(addExpectContinueMiddleware(options), exports.addExpectContinueMiddlewareOptions);
    }
}); };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBU0Esd0RBQXFEO0FBTXJELFNBQWdCLDJCQUEyQixDQUN6QyxPQUEyQjtJQUQ3QixpQkF3QkM7SUFyQkMsT0FBTyxVQUNMLElBQStCLElBQ0QsT0FBQSxVQUM5QixJQUFnQzs7O1lBRTFCLE9BQU8sR0FBSyxJQUFJLFFBQVQsQ0FBVTtZQUN2QixJQUNFLDJCQUFXLENBQUMsVUFBVSxDQUFDLE9BQU8sQ0FBQztnQkFDL0IsT0FBTyxDQUFDLElBQUk7Z0JBQ1osT0FBTyxDQUFDLE9BQU8sS0FBSyxNQUFNLEVBQzFCO2dCQUNBLE9BQU8sQ0FBQyxPQUFPLHlDQUNWLE9BQU8sQ0FBQyxPQUFPLEtBQ2xCLE1BQU0sRUFBRSxjQUFjLEdBQ3ZCLENBQUM7YUFDSDtZQUNELHNCQUFPLElBQUksdUNBQ04sSUFBSSxLQUNQLE9BQU8sU0FBQSxJQUNQLEVBQUM7O1NBQ0osRUFsQitCLENBa0IvQixDQUFDO0FBQ0osQ0FBQztBQXhCRCxrRUF3QkM7QUFFWSxRQUFBLGtDQUFrQyxHQUF3QjtJQUNyRSxJQUFJLEVBQUUsT0FBTztJQUNiLElBQUksRUFBRSxDQUFDLG1CQUFtQixFQUFFLGVBQWUsQ0FBQztJQUM1QyxJQUFJLEVBQUUsNkJBQTZCO0NBQ3BDLENBQUM7QUFFVyxRQUFBLDBCQUEwQixHQUFHLFVBQ3hDLE9BQTJCLElBQ0gsT0FBQSxDQUFDO0lBQ3pCLFlBQVksRUFBRSxVQUFBLFdBQVc7UUFDdkIsV0FBVyxDQUFDLEdBQUcsQ0FDYiwyQkFBMkIsQ0FBQyxPQUFPLENBQUMsRUFDcEMsMENBQWtDLENBQ25DLENBQUM7SUFDSixDQUFDO0NBQ0YsQ0FBQyxFQVB3QixDQU94QixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgQnVpbGRIYW5kbGVyLFxuICBCdWlsZEhhbmRsZXJBcmd1bWVudHMsXG4gIEJ1aWxkSGFuZGxlck9wdGlvbnMsXG4gIEJ1aWxkSGFuZGxlck91dHB1dCxcbiAgQnVpbGRNaWRkbGV3YXJlLFxuICBNZXRhZGF0YUJlYXJlcixcbiAgUGx1Z2dhYmxlXG59IGZyb20gXCJAYXdzLXNkay90eXBlc1wiO1xuaW1wb3J0IHsgSHR0cFJlcXVlc3QgfSBmcm9tIFwiQGF3cy1zZGsvcHJvdG9jb2wtaHR0cFwiO1xuXG5pbnRlcmZhY2UgUHJldmlvdXNseVJlc29sdmVkIHtcbiAgcnVudGltZTogc3RyaW5nO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkRXhwZWN0Q29udGludWVNaWRkbGV3YXJlKFxuICBvcHRpb25zOiBQcmV2aW91c2x5UmVzb2x2ZWRcbik6IEJ1aWxkTWlkZGxld2FyZTxhbnksIGFueT4ge1xuICByZXR1cm4gPE91dHB1dCBleHRlbmRzIE1ldGFkYXRhQmVhcmVyPihcbiAgICBuZXh0OiBCdWlsZEhhbmRsZXI8YW55LCBPdXRwdXQ+XG4gICk6IEJ1aWxkSGFuZGxlcjxhbnksIE91dHB1dD4gPT4gYXN5bmMgKFxuICAgIGFyZ3M6IEJ1aWxkSGFuZGxlckFyZ3VtZW50czxhbnk+XG4gICk6IFByb21pc2U8QnVpbGRIYW5kbGVyT3V0cHV0PE91dHB1dD4+ID0+IHtcbiAgICBsZXQgeyByZXF1ZXN0IH0gPSBhcmdzO1xuICAgIGlmIChcbiAgICAgIEh0dHBSZXF1ZXN0LmlzSW5zdGFuY2UocmVxdWVzdCkgJiZcbiAgICAgIHJlcXVlc3QuYm9keSAmJlxuICAgICAgb3B0aW9ucy5ydW50aW1lID09PSBcIm5vZGVcIlxuICAgICkge1xuICAgICAgcmVxdWVzdC5oZWFkZXJzID0ge1xuICAgICAgICAuLi5yZXF1ZXN0LmhlYWRlcnMsXG4gICAgICAgIEV4cGVjdDogXCIxMDAtY29udGludWVcIlxuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIG5leHQoe1xuICAgICAgLi4uYXJncyxcbiAgICAgIHJlcXVlc3RcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGNvbnN0IGFkZEV4cGVjdENvbnRpbnVlTWlkZGxld2FyZU9wdGlvbnM6IEJ1aWxkSGFuZGxlck9wdGlvbnMgPSB7XG4gIHN0ZXA6IFwiYnVpbGRcIixcbiAgdGFnczogW1wiU0VUX0VYUEVDVF9IRUFERVJcIiwgXCJFWFBFQ1RfSEVBREVSXCJdLFxuICBuYW1lOiBcImFkZEV4cGVjdENvbnRpbnVlTWlkZGxld2FyZVwiXG59O1xuXG5leHBvcnQgY29uc3QgZ2V0QWRkRXhwZWN0Q29udGludWVQbHVnaW4gPSAoXG4gIG9wdGlvbnM6IFByZXZpb3VzbHlSZXNvbHZlZFxuKTogUGx1Z2dhYmxlPGFueSwgYW55PiA9PiAoe1xuICBhcHBseVRvU3RhY2s6IGNsaWVudFN0YWNrID0+IHtcbiAgICBjbGllbnRTdGFjay5hZGQoXG4gICAgICBhZGRFeHBlY3RDb250aW51ZU1pZGRsZXdhcmUob3B0aW9ucyksXG4gICAgICBhZGRFeHBlY3RDb250aW51ZU1pZGRsZXdhcmVPcHRpb25zXG4gICAgKTtcbiAgfVxufSk7XG4iXX0=